"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[635],{5756(e,o,s){s.d(o,{R:()=>a,x:()=>i});var n=s(9471);let t={},l=n.createContext(t);function a(e){let o=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(l.Provider,{value:o},e.children)}},7283(e,o,s){s.r(o),s.d(o,{assets:()=>r,contentTitle:()=>i,default:()=>b,frontMatter:()=>a,metadata:()=>n,toc:()=>d});let n=JSON.parse('{"id":"walrus-client/managing-blobs","title":"Managing Blobs","description":"{/ https://linear.app/mysten-labs/issue/DOCS-641/walrus-clientmanaging-blobs /}","source":"@site/../content/walrus-client/managing-blobs.mdx","sourceDirName":"walrus-client","slug":"/walrus-client/managing-blobs","permalink":"/docs/walrus-client/managing-blobs","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/walrus-client/managing-blobs.mdx","tags":[],"version":"current","frontMatter":{"title":"Managing Blobs"},"sidebar":"docsSidebar","previous":{"title":"Reading Blobs","permalink":"/docs/walrus-client/reading-blobs"},"next":{"title":"JSON Mode","permalink":"/docs/walrus-client/json-mode"}}');var t=s(2615),l=s(5756);let a={title:"Managing Blobs"},i,r={},d=[{value:"Extend the lifetime of a blob",id:"extend-the-lifetime-of-a-blob",level:2},{value:"Reclaim space through deletable blobs",id:"reclaim-space-through-deletable-blobs",level:2},{value:"Shared blobs",id:"shared-blobs",level:2}];function c(e){let o={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,l.R)(),...e.components},{Term:s}=o;return s||function(e,o){throw Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,t.jsxs)(t.Fragment,{children:["\n",(0,t.jsxs)(o.h2,{id:"extend-the-lifetime-of-a-blob",children:["Extend the lifetime of a ",(0,t.jsx)(s,{lookup:"Blob",children:"blob"})]}),"\n",(0,t.jsxs)(o.p,{children:["Walrus ","blob"," lifetimes can be extended using the ",(0,t.jsx)(o.code,{children:"walrus extend --blob-obj-id <Sui object id> ..."})," command as long as the ","blob"," is not expired. Both address owned ","blobs"," and ",(0,t.jsx)(o.a,{href:"#shared-blobs",children:"shared blobs"})," can have their lifetime extended. Shared ","blobs"," can be extended by anyone, but owned ","blobs"," can only be extended by their owner. When extending a shared ","blob",", you need to supply the ",(0,t.jsx)(o.code,{children:"--shared"})," flag to inform the command that the ","blob"," is shared."]}),"\n",(0,t.jsxs)(o.p,{children:["The ","blob","'s object ID is needed in order to extend it. The ",(0,t.jsx)(s,{lookup:"Blob ID",children:"blob ID"})," is not needed. See ",(0,t.jsx)(o.code,{children:"walrus extend --help"})," for more information on ","blob"," extension."]}),"\n",(0,t.jsxs)(o.h2,{id:"reclaim-space-through-deletable-blobs",children:["Reclaim space through deletable ","blobs"]}),"\n",(0,t.jsxs)(o.p,{children:["A ","blob"," that was set as deletable upon creation can be deleted before its ",(0,t.jsx)(s,{lookup:"Expiry",children:"expiry"}),", but only by the owner of the Sui object corresponding to the ","blob",". Deletable ","blobs"," are indicated as such in the Sui events that certify them, and should not be relied upon by others for availability."]}),"\n",(0,t.jsxs)(o.p,{children:["Delete a ","blob"," with the command:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-sh",children:"$ walrus delete --blob-id <BLOB_ID>\n"})}),"\n",(0,t.jsxs)(o.p,{children:["The delete command can also be invoked by specifying a ",(0,t.jsx)(o.code,{children:"--file <PATH>"})," option to derive the ","blob ID"," from a file, or using ",(0,t.jsx)(o.code,{children:"--object-id <SUI_ID>"}),". Before deleting a ","blob",", the ",(0,t.jsx)(o.code,{children:"walrus delete"})," command asks for confirmation unless the ",(0,t.jsx)(o.code,{children:"--yes"})," option is specified."]}),"\n",(0,t.jsxs)(o.p,{children:["The ",(0,t.jsx)(o.code,{children:"delete"})," command reclaims the storage object associated with the deleted ","blob",", which is re-used to store new ","blobs"," automatically. The delete operation provides flexibility around managing ",(0,t.jsx)(o.a,{href:"/docs/system-overview/storage-costs",children:"storage costs"})," and re-using storage."]}),"\n",(0,t.jsxs)(o.p,{children:["The delete operation has limited utility for privacy. It only deletes slivers from the current epoch ",(0,t.jsx)(s,{lookup:"Storage node",children:"storage nodes"}),", and subsequent epoch ","storage nodes",", if no other ",(0,t.jsx)(s,{lookup:"User",children:"user"})," has uploaded a copy of the same ","blob",". If another copy of the same ","blob"," exists in Walrus, the delete operation does not make the ","blob"," unavailable for download, and ",(0,t.jsx)(o.code,{children:"walrus read"})," invocations will still download it. After the deletion is finished, the CLI checks the updated status of the ","blob"," to see if it is still accessible in Walrus, unless the ",(0,t.jsx)(o.code,{children:"--no-status-check"})," option was specified. However, even if the ","blob"," is not accessible, copies of the public ","blob"," might be cached or downloaded by users, and these copies are not deleted."]}),"\n",(0,t.jsx)(o.admonition,{type:"danger",children:(0,t.jsxs)(o.p,{children:["All ","blobs"," stored in Walrus are public and discoverable by all. The ",(0,t.jsx)(o.code,{children:"delete"})," command does not delete slivers if other copies of the ","blob"," are stored on Walrus, possibly by other users. It does not delete ","blobs"," from caches, slivers from past ","storage nodes",", or copies that could have been made by users before the ","blob"," was deleted."]})}),"\n",(0,t.jsxs)(o.h2,{id:"shared-blobs",children:["Shared ","blobs"]}),"\n",(0,t.jsxs)(o.p,{children:["Shared ","blobs"," are shared Sui objects wrapping standard ",(0,t.jsx)(o.code,{children:"Blob"})," objects that can be funded and whose lifetime can be extended by anyone. See the ",(0,t.jsx)(o.a,{href:"https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/shared_blob.move",children:"shared blobs contracts"})," for further details."]}),"\n",(0,t.jsxs)(o.p,{children:["You can create a shared ","blob"," from an existing ",(0,t.jsx)(o.code,{children:"Blob"})," object you own with the ",(0,t.jsx)(o.code,{children:"walrus share"})," command:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-sh",children:"$ walrus share --blob-obj-id <SUI_OBJ_ID>\n"})}),"\n",(0,t.jsxs)(o.p,{children:["The resulting shared ","blob"," can be directly funded by adding an ",(0,t.jsx)(o.code,{children:"--amount"}),", or you can fund an existing shared ","blob"," with the ",(0,t.jsx)(o.code,{children:"walrus fund-shared-blob"})," command. Additionally, you can immediately share a newly created ","blob"," by adding the ",(0,t.jsx)(o.code,{children:"--share"})," option to the ",(0,t.jsx)(o.code,{children:"walrus store"})," command."]}),"\n",(0,t.jsxs)(o.p,{children:["Shared ","blobs"," can only contain permanent ","blobs"," and as such cannot be deleted before their ","expiry","."]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.a,{href:"#extend-the-lifetime-of-a-blob",children:"Learn more"})," about ","blob"," extension."]})]})}function b(e={}){let{wrapper:o}={...(0,l.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);