"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[5490],{3153(e,t,o){o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});let i=JSON.parse('{"id":"system-overview/operations","title":"Operations","description":"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.","source":"@site/../content/system-overview/operations.mdx","sourceDirName":"system-overview","slug":"/system-overview/operations","permalink":"/docs/system-overview/operations","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/system-overview/operations.mdx","tags":[],"version":"current","frontMatter":{"title":"Operations","description":"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.","keywords":["walrus","operations","store","read","certify","delete","blob id","encoding","availability","developer operations"]},"sidebar":"docsSidebar","previous":{"title":"Components","permalink":"/docs/system-overview/components"},"next":{"title":"Storage Costs","permalink":"/docs/system-overview/storage-costs"}}');var s=o(2615),n=o(5756);let r={title:"Operations",description:"Developer guide to Walrus operations including store, read, certify availability, and delete operations for blob management.",keywords:["walrus","operations","store","read","certify","delete","blob id","encoding","availability","developer operations"]},a,l={},d=[{value:"Store",id:"store",level:2},{value:"Maximum blob size",id:"maximum-blob-size",level:3},{value:"Read",id:"read",level:2},{value:"Download",id:"download",level:2},{value:"Certify availability",id:"certify-availability",level:2},{value:"Delete",id:"delete",level:2}];function c(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components},{Term:o}=t;return o||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsxs)(t.p,{children:["Walrus stores ",(0,s.jsx)(o,{lookup:"Blob",children:"blobs"})," across ",(0,s.jsx)(o,{lookup:"Storage node",children:"storage nodes"})," in an ",(0,s.jsx)(t.a,{href:"/docs/design/encoding",children:"encoded form"}),", and refers to ","blobs"," by their ",(0,s.jsx)(o,{lookup:"Blob ID",children:"blob ID"}),". The ","blob ID"," is deterministically derived from the content of a ","blob"," and the Walrus configuration. The ","blob ID"," of 2 files with the same content is the same."]}),"\n",(0,s.jsxs)(t.p,{children:["You can derive the ","blob ID"," of a file locally using the command: ",(0,s.jsx)(t.code,{children:"walrus blob-id <file path>"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Blobs"," can be interacted with through familiar file system operations such as uploading, reading, downloading, and deleting."]}),"\n",(0,s.jsx)(t.h2,{id:"store",children:"Store"}),"\n",(0,s.jsxs)(t.p,{children:["The steps involved in a store operation can be executed by the binary ",(0,s.jsx)(o,{lookup:"Client",children:"client"})," or a ",(0,s.jsx)(o,{lookup:"Publisher",children:"publisher"})," that accepts and publishes ","blobs"," through ",(0,s.jsx)(t.a,{href:"/docs/http-api/storing-blobs",children:"HTTP"}),"."]}),"\n",(0,s.jsxs)(t.admonition,{type:"danger",children:[(0,s.jsx)(t.mdxAdmonitionTitle,{}),(0,s.jsxs)(t.p,{children:[(0,s.jsxs)(t.strong,{children:["All ","blobs"," stored in Walrus are public and discoverable by all."]})," Do not use Walrus to store anything that contains secrets or private data without additional measures to protect confidentiality, such as encrypting data with ",(0,s.jsx)(t.a,{href:"/docs/data-security",children:"Seal"}),"."]})]}),"\n",(0,s.jsxs)(t.p,{children:["When a ","blob"," is stored on Walrus, first the ","client"," or ","publisher"," encodes the ","blob"," and derives a ","blob ID"," that identifies the ","blob",". This is a ",(0,s.jsx)(t.code,{children:"u256"})," often encoded as a URL-safe base64 string. Then, a transaction is executed on Sui to purchase some storage from the system object and to register the ","blob ID"," occupying this storage. ","Client"," APIs return the Sui ","blob"," object ID. The transactions use SUI to purchase storage and pay for gas."]}),"\n",(0,s.jsxs)(t.p,{children:["Encoded slivers of the ","blob"," are distributed to all ","storage nodes",". They each sign a receipt. Signed receipts are aggregated and submitted to the Sui ","blob"," object to certify the ","blob",". Certifying a ","blob"," emits a Sui event with the ","blob ID"," and the period of availability."]}),"\n",(0,s.jsxs)(t.p,{children:["A ","blob"," is considered available on Walrus once the corresponding Sui ","blob"," object has been certified in the final step."]}),"\n",(0,s.jsxs)(t.h3,{id:"maximum-blob-size",children:["Maximum ","blob"," size"]}),"\n",(0,s.jsxs)(t.p,{children:["The maximum ","blob"," size can be queried through the ",(0,s.jsx)(t.a,{href:"/docs/walrus-client/storing-blobs#walrus-system-information",children:(0,s.jsx)(t.code,{children:"walrus info"})})," CLI command. The maximum ","blob"," size is currently 13.3\xa0GB. You can store larger ","blobs"," by splitting them into smaller chunks."]}),"\n",(0,s.jsxs)(t.p,{children:["Blobs"," are stored for a certain number of epochs which is specified at the time they are stored. Walrus ","storage nodes"," ensure that within these epochs a read succeeds. Mainnet uses an epoch duration of 2 weeks."]}),"\n",(0,s.jsx)(t.h2,{id:"read",children:"Read"}),"\n",(0,s.jsxs)(t.p,{children:["Read a ","blob"," after it is stored by providing its ","blob ID",". A read is executed by querying the system object on Sui to determine the Walrus ","storage node"," committee. Once the committee is determined, some of those ","storage nodes"," within the committee are queried for ",(0,s.jsx)(o,{lookup:"Blob metadata",children:"blob metadata"})," and the slivers they store. The ","blob"," is reconstructed from the recovered slivers and checked against the ","blob ID","."]}),"\n",(0,s.jsxs)(t.p,{children:["The steps involved in the read operation are performed by the binary ","client"," or the ",(0,s.jsx)(o,{lookup:"Aggregator",children:"aggregator"})," service that exposes an HTTP interface to read ","blobs",". Reads are resilient and succeed in recovering the ","blob"," in all cases even if up to 1/3 of ","storage nodes"," are unavailable. In most cases, after synchronization is complete, ","blobs"," can be read even if 2/3 of ","storage nodes"," are down."]}),"\n",(0,s.jsx)(t.h2,{id:"download",children:"Download"}),"\n",(0,s.jsxs)(t.p,{children:["To download a ","blob"," and save it on your local machine, run the following command:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"$ walrus read <blob-id> --out file.txt --context testnet\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Replace ",(0,s.jsx)(t.code,{children:"<blob-id>"})," with the ","blob","'s identifier the ",(0,s.jsx)(t.code,{children:"walrus store"})," command returns in its output, and replace ",(0,s.jsx)(t.code,{children:"file.txt"})," with the name and file extension for storing the file locally."]}),"\n",(0,s.jsx)(t.h2,{id:"certify-availability",children:"Certify availability"}),"\n",(0,s.jsxs)(t.p,{children:["Once a ","blob"," is certified, Walrus ensures that sufficient slivers are always available on ","storage nodes"," to recover it within the specified epochs."]}),"\n",(0,s.jsxs)(t.p,{children:["You can verify ","blob"," availability in 3 ways:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsxs)(t.strong,{children:["Using the certified ","blob"," event"]}),": Use a Sui SDK read to authenticate the certified ","blob"," event emitted when the ","blob ID"," was certified on Sui. The ",(0,s.jsx)(t.code,{children:"walrus blob-status"})," command identifies the event ID to check."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsxs)(t.strong,{children:["Using the ","blob"," object"]}),": Use a Sui SDK read to authenticate the Sui ","blob"," object corresponding to the ","blob ID",", verify it is certified, before the ",(0,s.jsx)(o,{lookup:"Expiry",children:"expiry"})," epoch, and not deletable."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Using a smart contract"}),": A Sui smart contract can read the ","blob"," object on Sui to verify it is certified, before the ","expiry"," epoch, and not deletable."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The underlying protocol of the ",(0,s.jsx)(t.a,{href:"https://github.com/MystenLabs/sui/tree/main/crates/sui-light-client",children:"Sui light client"})," returns digitally signed evidence for emitted events or objects, and can be used by offline or non-interactive applications as a proof of availability for the ","blob ID"," for a certain number of epochs."]}),"\n",(0,s.jsx)(t.h2,{id:"delete",children:"Delete"}),"\n",(0,s.jsxs)(t.p,{children:["Stored ","blobs"," can be set as deletable by the ",(0,s.jsx)(o,{lookup:"User",children:"user"})," that creates them. This metadata is stored in the Sui ","blob"," object, and whether a ","blob"," is deletable or not is included in certified ","blob"," events. A ",(0,s.jsx)(o,{lookup:"Deletable blob",children:"deletable blob"})," can be deleted by the owner of the ","blob"," object to reclaim and reuse the storage resource associated with it."]}),"\n",(0,s.jsxs)(t.p,{children:["If no other copies of the ","blob"," exist on Walrus, deleting a ","blob"," eventually makes it unrecoverable using read commands. However, if other copies of the ","blob"," exist on Walrus, a delete command reclaims storage space for the ","user"," that invoked it, but does not make the ","blob"," unavailable until all other copies have been deleted or expire."]})]})}function h(e={}){let{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},5756(e,t,o){o.d(t,{R:()=>r,x:()=>a});var i=o(9471);let s={},n=i.createContext(s);function r(e){let t=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);