"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[3625],{2782(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});let t=JSON.parse('{"id":"http-api/storing-blobs","title":"Storing Blobs","description":"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.","source":"@site/../content/http-api/storing-blobs.mdx","sourceDirName":"http-api","slug":"/http-api/storing-blobs","permalink":"/docs/http-api/storing-blobs","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/http-api/storing-blobs.mdx","tags":[],"version":"current","frontMatter":{"title":"Storing Blobs","description":"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.","keywords":["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},"sidebar":"docsSidebar","previous":{"title":"Logging and Metrics","permalink":"/docs/walrus-client/logging-and-metrics"},"next":{"title":"Reading Blobs","permalink":"/docs/http-api/reading-blobs"}}');var r=s(2615),o=s(5756);let i={title:"Storing Blobs",description:"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.",keywords:["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},l,a={},c=[];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Term:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,r.jsxs)(r.Fragment,{children:["\n",(0,r.jsxs)(n.p,{children:["You can store data using HTTP PUT requests. For example, with ",(0,r.jsx)(n.a,{href:"https://curl.se",children:"cURL"}),", you can store ",(0,r.jsx)(s,{lookup:"Blob",children:"blobs"})," using a ",(0,r.jsx)(s,{lookup:"Publisher",children:"publisher"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Store the string `some string` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some string"\n# Store file `some/file` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" --upload-file "some/file"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Control how the new ","blob"," is created through a combination of several query parameters as documented in the ",(0,r.jsx)(n.a,{href:"#http-api-usage",children:"OpenAPI specification"}),". For example:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify the lifetime of the ","blob"," through the ",(0,r.jsx)(n.code,{children:"epochs"})," parameter. If the parameter is omitted, ","blobs"," are stored for 1 epoch."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` for 5 storage epochs\n$ curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify whether a ","blob"," is stored as permanent or deletable through a query parameter ",(0,r.jsx)(n.code,{children:"permanent=true"})," or ",(0,r.jsx)(n.code,{children:"deletable=true"}),", respectively:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` as a deletable blob:\n$ curl -X PUT "$PUBLISHER/v1/blobs?deletable=true" --upload-file "some/file"\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` as a permanent blob:\n$ curl -X PUT "$PUBLISHER/v1/blobs?permanent=true" --upload-file "some/file"\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsxs)(n.p,{children:["Newly stored ","blobs"," are ",(0,r.jsx)(n.em,{children:"deletable"})," by default."]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify an address to which the resulting ",(0,r.jsx)(n.code,{children:"Blob"})," object is sent using the ",(0,r.jsx)(n.code,{children:"send-object-to"})," parameter:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` and send the blob object to `$ADDRESS`:\n$ curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The store HTTP API endpoints return information about stored ","blobs"," in JSON format. When a ","blob"," is stored for the first time, a ",(0,r.jsx)(n.code,{children:"newlyCreated"})," field contains information about it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If successful, the console responds with the information stored in the content of the ","blob","'s corresponding ",(0,r.jsx)(n.a,{href:"/docs/system-overview/core-concepts",children:"Sui object"}),".\n:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'{\n  "newlyCreated": {\n    "blobObject": {\n    "id": "0xe91eee8c5b6f35b9a250cfc29e30f0d9e5463a21fd8d1ddb0fc22d44db4eac50",\n    "registeredEpoch": 34,\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "size": 17,\n    "encodingType": "RS2",\n    "certifiedEpoch": 34,\n    "storage": {\n        "id": "0x4748cd83217b5ce7aa77e7f1ad6fc5f7f694e26a157381b9391ac65c47815faf",\n        "startEpoch": 34,\n        "endEpoch": 35,\n        "storageSize": 66034000\n    },\n    "deletable": false\n    },\n    "resourceOperation": {\n    "registerFromScratch": {\n        "encodedLength": 66034000,\n        "epochsAhead": 1\n    }\n    },\n    "cost": 132300\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When the ","publisher"," finds a certified ","blob"," with the same ",(0,r.jsx)(s,{lookup:"Blob ID",children:"blob ID"})," and a sufficient validity period, it returns an ",(0,r.jsx)(n.code,{children:"alreadyCertified"})," JSON structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'{\n  "alreadyCertified": {\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "event": {\n    "txDigest": "4XQHFa9S324wTzYHF3vsBSwpUZuLpmwTHYMFv9nsttSs",\n    "eventSeq": "0"\n    },\n    "endEpoch": 35\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The field ",(0,r.jsx)(n.code,{children:"event"})," returns the ",(0,r.jsx)(n.a,{href:"/docs/system-overview/core-concepts",children:"Sui event ID"})," that can be used to find the object creation transaction using a ",(0,r.jsx)(n.a,{href:"https://suiscan.xyz/",children:"Sui Explorer"})," or using a ",(0,r.jsx)(n.a,{href:"https://docs.sui.io/references/sui-sdks",children:"Sui SDK"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5756(e,n,s){s.d(n,{R:()=>i,x:()=>l});var t=s(9471);let r={},o=t.createContext(r);function i(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);