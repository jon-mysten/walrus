"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[4447],{446(e,s,o){o.d(s,{A:()=>t});let t=o.p+"assets/files/walrus_whitepaper_v2-31701a689e75cc47048440b56789f388.pdf"},5756(e,s,o){o.d(s,{R:()=>n,x:()=>a});var t=o(9471);let r={},i=t.createContext(r);function n(e){let s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:n(e.components),t.createElement(i.Provider,{value:s},e.children)}},7661(e,s,o){o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>n,metadata:()=>t,toc:()=>l});let t=JSON.parse('{"id":"system-overview/storage-costs","title":"Storage Costs","description":"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.","source":"@site/../content/system-overview/storage-costs.mdx","sourceDirName":"system-overview","slug":"/system-overview/storage-costs","permalink":"/docs/system-overview/storage-costs","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/system-overview/storage-costs.mdx","tags":[],"version":"current","frontMatter":{"title":"Storage Costs","description":"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.","keywords":["walrus","storage costs","wal token","sui gas","cost optimization","storage resources","upload costs","tokenomics"]},"sidebar":"docsSidebar","previous":{"title":"Operations","permalink":"/docs/system-overview/operations"},"next":{"title":"Sui Object IDs and Blob IDs","permalink":"/docs/system-overview/sui-object-and-blob-ids"}}');var r=o(2615),i=o(5756);let n={title:"Storage Costs",description:"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.",keywords:["walrus","storage costs","wal token","sui gas","cost optimization","storage resources","upload costs","tokenomics"]},a,c={},l=[{value:"Cost calculator",id:"cost-calculator",level:2},{value:"Understanding sources of cost",id:"understanding-sources-of-cost",level:2},{value:"Storage resources",id:"storage-resources",level:3},{value:"Uploading blobs",id:"uploading-blobs",level:3},{value:"Creating Sui transactions",id:"creating-sui-transactions",level:3},{value:"Creating Sui objects",id:"creating-sui-objects",level:3},{value:"Measuring costs",id:"measuring-costs",level:2},{value:"Estimating costs programmatically",id:"estimating-costs-programmatically",level:3},{value:"Acquiring storage resources",id:"acquiring-storage-resources",level:2},{value:"Optimizing storage resource costs",id:"optimizing-storage-resource-costs",level:2},{value:"Reducing costs for small blobs with Quilt",id:"reducing-costs-for-small-blobs-with-quilt",level:3},{value:"Buy larger resources in bulk",id:"buy-larger-resources-in-bulk",level:3},{value:"Use Sui PTBs efficiently",id:"use-sui-ptbs-efficiently",level:3},{value:"Reclaim and reuse storage",id:"reclaim-and-reuse-storage",level:3},{value:"Optimizing blob operation costs",id:"optimizing-blob-operation-costs",level:2},{value:"Batch blob operations",id:"batch-blob-operations",level:3},{value:"Manage blob objects efficiently",id:"manage-blob-objects-efficiently",level:3},{value:"Consider blob object lifecycle",id:"consider-blob-object-lifecycle",level:3}];function d(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Term:t}=s;return t||function(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,r.jsxs)(r.Fragment,{children:["\n",(0,r.jsxs)(s.p,{children:["Storing ",(0,r.jsx)(t,{lookup:"Blob",children:"blobs"})," on Walrus Mainnet incurs two separate costs:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(t,{lookup:"WAL",children:"WAL"})," for the storage operation. You can learn more about the ",(0,r.jsx)(s.a,{href:"https://www.walrus.xyz/wal-token",children:"WAL tokenomics"})," and the role ","WAL"," plays in the ",(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:o(446).A+"",children:"Walrus delegated proof of stake system"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["SUI for executing transactions on Sui Mainnet. You can learn more about ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/tokenomics",children:"SUI tokenomics"})," and how SUI ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/tokenomics/gas-in-sui",children:"gas fees are calculated"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.admonition,{type:"caution",children:[(0,r.jsx)(s.mdxAdmonitionTitle,{}),(0,r.jsxs)(s.p,{children:["There are plans to stabilize costs to USD such that storage fees are not subject to ","WAL"," fluctuations."]})]}),"\n",(0,r.jsx)(s.h2,{id:"cost-calculator",children:"Cost calculator"}),"\n",(0,r.jsxs)(s.p,{children:["Use the Walrus Cost Calculator for an interactive interface that can help estimate total storage costs: ",(0,r.jsx)(s.a,{href:"https://costcalculator.wal.app/",children:"https://costcalculator.wal.app/"})]}),"\n",(0,r.jsxs)(s.p,{children:["For technical details on how costs are measured and calculated, refer to the ",(0,r.jsx)(s.a,{href:"#measuring-costs",children:"Measuring costs"})," section."]}),"\n",(0,r.jsx)(s.h2,{id:"understanding-sources-of-cost",children:"Understanding sources of cost"}),"\n",(0,r.jsx)(s.p,{children:"The sources of cost associated with Walrus Storage are:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Acquiring storage resources"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Uploading ","blobs"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Creating Sui transactions"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Creating Sui objects on-chain"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"storage-resources",children:"Storage resources"}),"\n",(0,r.jsxs)(s.p,{children:["A storage resource is needed to store a ","blob",", with an appropriate capacity and epoch duration. Storage resources can be acquired from the Walrus system contract while there is free space available on the system against some ","WAL",". Other options are also available, such as receiving it from other parties, or splitting a larger resource bought occasionally into smaller resources."]}),"\n",(0,r.jsxs)(s.p,{children:["The size of the storage resource needed to store a ","blob"," and the size taken into account to pay for upload costs corresponds to the encoded size of a ","blob",". The encoded size of a ","blob"," is the size of the erasure coded ","blob",", which is about 5x larger than the unencoded original ","blob"," size, plus the size of metadata that is independent of the size of the ","blob",". Since the fixed size per-",(0,r.jsx)(t,{lookup:"Blob metadata",children:"blob metadata"})," is quite large, at most about 64MB, the cost of storing small ","blobs"," (< 10MB) is dominated by this, and the size of storing larger ","blobs"," is dominated by their increasing size. See ",(0,r.jsx)(s.a,{href:"#reducing-costs-for-small-blobs",children:"Reducing costs for small blobs"})," for more information on cost optimization strategies."]}),"\n",(0,r.jsxs)(s.h3,{id:"uploading-blobs",children:["Uploading ","blobs"]}),"\n",(0,r.jsxs)(s.p,{children:["Upon ","blob"," registration, some ","WAL"," is charged to cover the costs of data upload. This ensures that deleting ","blobs"," and reusing the same storage resource for storing a new ","blob"," is sustainable for the system."]}),"\n",(0,r.jsx)(s.h3,{id:"creating-sui-transactions",children:"Creating Sui transactions"}),"\n",(0,r.jsxs)(s.p,{children:["Storing a ","blob"," involves up to 3 on-chain ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/transactions",children:"transactions on Sui"}),". One to acquire a storage resource, another that is possibly combined with the first to register the ","blob"," and associate it with a ",(0,r.jsx)(t,{lookup:"Blob ID",children:"blob ID"}),", and a final one to certify the ","blob"," as available. These incur gas fees in SUI to cover the costs of computation."]}),"\n",(0,r.jsx)(s.h3,{id:"creating-sui-objects",children:"Creating Sui objects"}),"\n",(0,r.jsxs)(s.p,{children:["Walrus ","blobs"," are represented as ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/objects/object-model",children:"Sui objects"})," on-chain. Creating these objects sets aside some SUI into the ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-fund",children:"Sui storage fund"}),", and most of it is refunded when the objects are deleted after they are not needed anymore."]}),"\n",(0,r.jsx)(s.h2,{id:"measuring-costs",children:"Measuring costs"}),"\n",(0,r.jsxs)(s.p,{children:["The most accurate way to measure costs is to upload a ","blob"," and observe the costs of SUI and ","WAL"," in a Sui explorer or directly through Sui RPC calls. ","Blob"," contents do not affect costs."]}),"\n",(0,r.jsx)(s.p,{children:"For example, the following command results in 2 transactions:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"$ walrus store <FILENAME> --epochs 1\n"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The first transaction performs a ",(0,r.jsx)(s.code,{children:"reserve_space"})," if no storage resource of appropriate size exists and ",(0,r.jsx)(s.code,{children:"register_blob"}),". This affects the balances of both SUI and ","WAL",". The SUI cost of ",(0,r.jsx)(s.code,{children:"register_blob"})," is independent of ","blob"," size or epoch lifetime. The ","WAL"," costs of ",(0,r.jsx)(s.code,{children:"register_blob"})," are linear in the encoded size of the ","blob",", both erasure coding and metadata. Calls to ",(0,r.jsx)(s.code,{children:"reserve_space"})," have SUI costs that grow in the number of epochs, and ","WAL"," costs linear with both encoded size and the number of epochs."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The second performs a single call to ",(0,r.jsx)(s.code,{children:"certify_blob"})," and only changes the SUI balance. The SUI cost of ",(0,r.jsx)(s.code,{children:"certify_blob"})," is independent of ","blob"," size or epoch lifetime."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["You can observe the ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-rebates",children:"storage rebate"})," on an explorer by burning the resulting ","blob"," objects using the command:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"$ walrus burn-blobs --object-ids <BLOB_OBJECT_ID>\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Burning the object on Sui does not delete the ","blob"," on Walrus."]}),"\n",(0,r.jsx)(s.h3,{id:"estimating-costs-programmatically",children:"Estimating costs programmatically"}),"\n",(0,r.jsx)(s.p,{children:"A few commands output information that can assist in cost estimations without submitting transactions:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"walrus info"})," command displays the current costs for buying storage resources from the system contract and cost of uploads."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"walrus store --dry-run ..."})," command outputs the encoded size that is used in calculations of ","WAL"," costs. The ",(0,r.jsx)(s.code,{children:"--dry-run"})," parameter ensures no transactions are submitted on-chain."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"acquiring-storage-resources",children:"Acquiring storage resources"}),"\n",(0,r.jsx)(s.p,{children:"You can acquire storage resources through different methods. Each method impacts the total storage cost:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Purchase from system contract"}),": Send ","WAL"," to the Walrus system contract to buy a storage resource for a specific size in bytes and lifetime in epochs. The ",(0,r.jsx)(s.code,{children:"walrus info"})," command will display the current cost of buying storage resources from the storage contract."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Reuse existing resources you already own"}),": The CLI ",(0,r.jsx)(t,{lookup:"Client",children:"client"})," automatically uses any ",(0,r.jsx)(t,{lookup:"User",children:"user"}),"-owned storage resource of appropriate size and duration before purchasing new storage."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Transfer or trade"}),": Storage resources can be transferred between users or acquired through future marketplace implementations."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"optimizing-storage-resource-costs",children:"Optimizing storage resource costs"}),"\n",(0,r.jsx)(s.p,{children:"The Walrus CLI uses strategies to lower costs, but is not guaranteed to be optimal for all use-cases. For high volume or other cost sensitive users, consider the following strategies to reduce costs."}),"\n",(0,r.jsxs)(s.h3,{id:"reducing-costs-for-small-blobs-with-quilt",children:["Reducing costs for small ","blobs"," with Quilt"]}),"\n",(0,r.jsxs)(s.p,{children:["Walrus ",(0,r.jsx)(s.a,{href:"/docs/system-overview/quilt",children:"Quilt"})," is a batch storage tool that reduces storage costs for small ","blobs",". When multiple ","blobs"," are stored together, the metadata costs are amortized across the batch. Quilt can also significantly reduce Sui computation and storage costs."]}),"\n",(0,r.jsx)(s.h3,{id:"buy-larger-resources-in-bulk",children:"Buy larger resources in bulk"}),"\n",(0,r.jsxs)(s.p,{children:["Acquiring resources from the system contract requires at least one Sui transaction with a complex shared object smart contract. Purchasing larger storage resources at once, both in size and duration, minimizes SUI gas costs. You can then split and merge these resources as needed for smaller ","blobs"," or shorter time periods."]}),"\n",(0,r.jsx)(s.h3,{id:"use-sui-ptbs-efficiently",children:"Use Sui PTBs efficiently"}),"\n",(0,r.jsxs)(s.p,{children:["Pack multiple smart contract calls into a single Sui ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/transactions/prog-txn-blocks",children:"programmable transaction block (PTB)"})," to manage storage resource acquisition, splitting, and merging. This approach reduces both latency and costs."]}),"\n",(0,r.jsx)(s.h3,{id:"reclaim-and-reuse-storage",children:"Reclaim and reuse storage"}),"\n",(0,r.jsxs)(s.p,{children:["Storage resources can be reclaimed and reused by deleting non-expired ","blobs"," that were configure as deletable when created.. If your dApp only needs to store data for less than a full epoch (2 weeks on Mainnet), you can reduce costs by actively deleting ","blobs"," and reusing the storage space."]}),"\n",(0,r.jsxs)(s.h2,{id:"optimizing-blob-operation-costs",children:["Optimizing ","blob"," operation costs"]}),"\n",(0,r.jsxs)(s.p,{children:["You can also reduce costs by optimizing ","blob"," operations."]}),"\n",(0,r.jsxs)(s.h3,{id:"batch-blob-operations",children:["Batch ","blob"," operations"]}),"\n",(0,r.jsxs)(s.p,{children:["Registering and certifying ","blobs"," costs SUI for gas and ","WAL"," for uploads. While each ","blob"," must go through both operations, you can register or certify multiple ","blobs"," in a single Sui PTB to reduce latency and costs. The CLI ","client"," uses this approach when uploading multiple ","blobs"," simultaneously."]}),"\n",(0,r.jsxs)(s.h3,{id:"manage-blob-objects-efficiently",children:["Manage ","blob"," objects efficiently"]}),"\n",(0,r.jsxs)(s.p,{children:["Each ","blob"," stored on Walrus creates a Sui object containing metadata. While these objects are small, storage on Sui is expensive and costs accumulate. Once a ","blob","'s validity period expires, burn the ","blob"," object to reclaim most of the Sui storage costs through a ",(0,r.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-rebates",children:"storage rebate"}),". This does not delete the ","blob"," data on Walrus."]}),"\n",(0,r.jsxs)(s.h3,{id:"consider-blob-object-lifecycle",children:["Consider ","blob"," object lifecycle"]}),"\n",(0,r.jsxs)(s.p,{children:["Blob"," objects manage ","blob"," lifecycle operations such as extending lifetimes, deleting ","blobs"," to reclaim storage, or adding attributes. If you no longer need these capabilities, burn the ","blob"," object through the CLI or a smart contract call to save on Sui storage costs. Depending on the relative costs of SUI and ","WAL",", it might be cheaper to burn a long-lived ","blob"," object and re-register and re-certify it close to the end of its lifetime to extend storage."]})]})}function u(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);