"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[6342],{628(e,s,n){n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});let i=JSON.parse('{"id":"sites/ci-cd/preparing-deployment-credentials","title":"Preparing Your Deployment Credentials","description":"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.","source":"@site/../content/sites/ci-cd/preparing-deployment-credentials.mdx","sourceDirName":"sites/ci-cd","slug":"/sites/ci-cd/preparing-deployment-credentials","permalink":"/docs/sites/ci-cd/preparing-deployment-credentials","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/sites/ci-cd/preparing-deployment-credentials.mdx","tags":[],"version":"current","frontMatter":{"title":"Preparing Your Deployment Credentials","description":"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.","keywords":["walrus sites","github secrets","deployment credentials","sui wallet","private key","security","authentication"]},"sidebar":"sitesSidebar","previous":{"title":"Avoiding Duplicate Content SEO","permalink":"/docs/sites/linking/avoiding-duplicate-content-seo"},"next":{"title":"Writing Your Workflow","permalink":"/docs/sites/ci-cd/github-actions-workflow"}}');var t=n(2615),r=n(5756);let o={title:"Preparing Your Deployment Credentials",description:"Guide to setting up GitHub secrets and variables for secure Walrus Sites deployment with Sui wallet credentials.",keywords:["walrus sites","github secrets","deployment credentials","sui wallet","private key","security","authentication"]},l,a={},d=[{value:"Exporting your private key",id:"exporting-your-private-key",level:2},{value:"Funding your address",id:"funding-your-address",level:2},{value:"Adding credentials to GitHub",id:"adding-credentials-to-github",level:2}];function c(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{TabItem:n,Tabs:i,Term:o}=s;return n||u("TabItem",!0),i||u("Tabs",!0),o||u("Term",!0),(0,t.jsxs)(t.Fragment,{children:["\n",(0,t.jsx)(s.p,{children:"To allow a GitHub Action to deploy your Walrus Site, it needs to be able to sign transactions on your behalf. This requires securely providing it with your private key and the corresponding public address."}),"\n",(0,t.jsx)(s.p,{children:"You will need to:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Export a private key from your Sui Wallet or CLI."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Correctly format the key and add it as a ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret in your GitHub repository."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Add the matching public address as a ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable in your GitHub repository."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)("div",{className:"outlined-tabs",children:(0,t.jsx)(i,{children:(0,t.jsx)(n,{value:"prereq",label:"Prerequisites",children:(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/getting-started/sui-install",children:"Install the Sui binary"}),"."]}),"\n"]})})})}),"\n",(0,t.jsx)(s.h2,{id:"exporting-your-private-key",children:"Exporting your private key"}),"\n",(0,t.jsxs)(s.p,{children:["It's recommended to use a dedicated Sui address for each GitHub workflow rather than reusing addresses across different projects or purposes. This provides better security isolation and helps avoid ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/sui-101/avoid-equivocation",children:"gas-coin equivocation"})," issues that can occur when multiple workflows try to use the same gas coins concurrently."]}),"\n",(0,t.jsx)("div",{className:"outlined-tabs",children:(0,t.jsxs)(i,{children:[(0,t.jsxs)(n,{label:"From Sui CLI",value:"cli",children:[(0,t.jsxs)(s.p,{children:["If you wish to use a key you already own, you can find it in the ",(0,t.jsx)(s.code,{children:"~/.sui/sui_config/sui.keystore"})," file. This file contains a JSON array of all your keys. To find the address for a specific key, you would need to use the ",(0,t.jsx)(s.code,{children:'sui keytool unpack "<the base64 key from sui.keystore>"'})," command."]}),(0,t.jsx)(s.p,{children:"If you'd like to create a new key:"}),(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Generate a new key by running the following command in your terminal:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ sui keytool generate ed25519 # Or secp256k1 or secp256r1\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["This command creates a file in your current directory named ",(0,t.jsx)(s.code,{children:"<SUI_ADDRESS>.key"})," (for example, ",(0,t.jsx)(s.code,{children:"0x123...abc.key"}),"). The filename is your new ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/getting-started/get-address",children:"Sui address"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The content of this file is the private key in the ",(0,t.jsx)(s.code,{children:"base64WithFlag"})," format. This is the value you need for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["You now have both the address (from the filename) for the ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable and the key (from the file's content) for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n"]})]}),(0,t.jsxs)(n,{label:"From Slush wallet",value:"slush",children:[(0,t.jsxs)(s.p,{children:["This method is recommended if you manage your keys through the ",(0,t.jsx)(s.a,{href:"https://chromewebstore.google.com/detail/slush-%E2%80%94-a-sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",children:"Slush browser extension"}),"."]}),(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Open your Slush extension and select the account you want to use for deployments. Make sure to copy the corresponding Sui address, as you need it later for the ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"})," variable."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Navigate to the account management screen and select ",(0,t.jsx)(s.strong,{children:"Export Private Key"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Copy the provided private key (it is in bech32 format, starting with ",(0,t.jsx)(s.code,{children:"suiprivkey"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Use the ",(0,t.jsx)(s.code,{children:"sui keytool convert <suiprivkey...>"})," command to transform your key into the required Base64 format. Paste your copied key in place of ",(0,t.jsx)(s.code,{children:"suiprivkey..."}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ sui keytool convert `suiprivkey...`\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"The command produces an output similar to:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"\u256D\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256E\n\u2502 bech32WithFlag \u2502  suiprivkey............................................................  \u2502\n\u2502 base64WithFlag \u2502  A...........................................                            \u2502\n\u2502 hexWithoutFlag \u2502  ................................................................        \u2502\n\u2502 scheme         \u2502  ed25519                                                                 \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256F\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Copy the ",(0,t.jsx)(s.code,{children:"base64WithFlag"})," value. This is what you use for the ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"})," secret."]}),"\n"]}),"\n"]})]})]})}),"\n",(0,t.jsx)(s.h2,{id:"funding-your-address",children:"Funding your address"}),"\n",(0,t.jsxs)(s.p,{children:["Before the GitHub Action can deploy your site, the address you generated needs to be funded with both ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/getting-started/get-coins",children:"SUI tokens"})," (for network gas fees) and ",(0,t.jsx)(s.a,{href:"/docs/getting-started",children:"WAL tokens"})," (for storing your site's data). The method for acquiring these tokens differs between Testnet and Mainnet."]}),"\n",(0,t.jsx)("div",{className:"outlined-tabs",children:(0,t.jsxs)(i,{children:[(0,t.jsx)(n,{label:"Testnet Funding",value:"testnet",children:(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Get SUI tokens"}),": Use the ",(0,t.jsx)(s.a,{href:"https://faucet.sui.io/",children:"official Sui faucet"})," to get free Testnet SUI."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)(s.strong,{children:["Get ",(0,t.jsx)(o,{lookup:"WAL",children:"WAL"})," tokens"]}),": Exchange your new Testnet SUI for Testnet ","WAL"," at a 1:1 rate by running the ",(0,t.jsx)(s.code,{children:"walrus get-wal"})," command either using the ",(0,t.jsx)(s.code,{children:"walrus get-wal"})," CLI command or visiting ",(0,t.jsx)(s.a,{href:"https://stake-wal.wal.app/?network=testnet",children:"stake-wal.wal.app"}),' setting network to Testnet and using the "Get ',"WAL",'" button.']}),"\n"]}),"\n"]})}),(0,t.jsx)(n,{label:"Mainnet funding",value:"mainnet",children:(0,t.jsxs)(s.p,{children:["For a Mainnet deployment, you need to acquire both SUI and ","WAL"," tokens from an exchange and transfer them to your deployment address. You can also check Slush Wallet for token swaps to ","WAL",", and on-ramp services. Availability might vary by region."]})})]})}),"\n",(0,t.jsx)(s.h2,{id:"adding-credentials-to-github",children:"Adding credentials to GitHub"}),"\n",(0,t.jsx)(s.p,{children:"Now, add the key and address to your GitHub repository."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Navigate to your GitHub repository in a web browser."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click on the ",(0,t.jsx)(s.strong,{children:"Settings"})," tab located in the top navigation bar of your repository."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the left sidebar, click ",(0,t.jsx)(s.strong,{children:"Secrets and variables"}),", then select ",(0,t.jsx)(s.strong,{children:"Actions"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["You see 2 tabs: ",(0,t.jsx)(s.strong,{children:"Secrets"})," and ",(0,t.jsx)(s.strong,{children:"Variables"}),". Start with the ",(0,t.jsx)(s.strong,{children:"Secrets"})," tab."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click the ",(0,t.jsx)(s.strong,{children:"New repository secret"})," button."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Name the secret ",(0,t.jsx)(s.code,{children:"SUI_KEYSTORE"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the ",(0,t.jsx)(s.strong,{children:"Value"})," field, paste the ",(0,t.jsx)(s.code,{children:"Base64 Key with Flag"})," you copied earlier. It must be formatted as a JSON array containing a single string:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'["AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"]\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click ",(0,t.jsx)(s.strong,{children:"Add secret"})," to save it."]}),"\n",(0,t.jsx)(s.admonition,{type:"caution",children:(0,t.jsx)(s.p,{children:"Make sure to format the keystore as a JSON array with a single string element, not just the raw key value. Include the square brackets and quotes exactly as shown above."})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Next, switch to the ",(0,t.jsx)(s.strong,{children:"Variables"})," tab and click ",(0,t.jsx)(s.strong,{children:"New repository variable"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Name the variable ",(0,t.jsx)(s.code,{children:"SUI_ADDRESS"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In the ",(0,t.jsx)(s.strong,{children:"Value"})," field, paste the Sui address that corresponds to your private key (for example: ",(0,t.jsx)(s.code,{children:"0x123abc...def789"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Click ",(0,t.jsx)(s.strong,{children:"Add variable"})," to save it."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.admonition,{type:"danger",children:(0,t.jsx)(s.p,{children:"Never share your private key or commit it to version control. GitHub secrets are encrypted and only accessible to your workflows, but always verify you're adding secrets correctly."})}),"\n",(0,t.jsx)(s.p,{children:"For more information about managing secrets and variables in GitHub Actions, check the official GitHub documentation:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.github.com/en/actions/concepts/security/about-secrets",children:"About secrets"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.github.com/en/actions/security-for-github-actions/security-guides/using-secrets-in-github-actions",children:"Using secrets in GitHub Actions"})}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}function u(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},5756(e,s,n){n.d(s,{R:()=>o,x:()=>l});var i=n(9471);let t={},r=i.createContext(t);function o(e){let s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);