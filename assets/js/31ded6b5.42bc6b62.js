"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[6859],{5756(e,r,s){s.d(r,{R:()=>n,x:()=>a});var t=s(9471);let i={},o=t.createContext(i);function n(e){let r=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),t.createElement(o.Provider,{value:r},e.children)}},6299(e,r,s){s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>n,metadata:()=>t,toc:()=>c});let t=JSON.parse('{"id":"sites/known-restrictions","title":"Known Restrictions","description":"Overview of known restrictions and limitations when developing and deploying Walrus Sites.","source":"@site/../content/sites/known-restrictions.mdx","sourceDirName":"sites","slug":"/sites/known-restrictions","permalink":"/docs/sites/known-restrictions","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/sites/known-restrictions.mdx","tags":[],"version":"current","frontMatter":{"title":"Known Restrictions","description":"Overview of known restrictions and limitations when developing and deploying Walrus Sites.","keywords":["walrus sites","restrictions","limitations","development","secret values","redirects","portal restrictions"]},"sidebar":"sitesSidebar","previous":{"title":"Site Data Authentication","permalink":"/docs/sites/security/site-data-authentication"}}');var i=s(2615),o=s(5756);let n={title:"Known Restrictions",description:"Overview of known restrictions and limitations when developing and deploying Walrus Sites.",keywords:["walrus sites","restrictions","limitations","development","secret values","redirects","portal restrictions"]},a,l={},c=[{value:"No secret values",id:"no-secret-values",level:2},{value:"Maximum redirect depth",id:"maximum-redirect-depth",level:2},{value:"Special <code>__wal__</code> path",id:"special-__wal__-path",level:2},{value:"Service-worker portal limitations",id:"service-worker-portal-limitations",level:2},{value:"Service-worker portals cannot serve sites based on service-workers",id:"service-worker-portals-cannot-serve-sites-based-on-service-workers",level:3},{value:"iOS Sui mobile wallets do not work with the service-worker portal",id:"ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal",level:3},{value:"Service worker portals do not support progressive web apps (PWAs)",id:"service-worker-portals-do-not-support-progressive-web-apps-pwas",level:3}];function d(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:s}=r;return s||function(e,r){throw Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,i.jsxs)(i.Fragment,{children:["\n",(0,i.jsx)(r.p,{children:"Walrus Sites can be used to deploy almost any form of traditional static Web2 website built for modern browsers. There are, however, a number of restrictions that a developer should keep in mind when creating or porting a website to Walrus Sites."}),"\n",(0,i.jsx)(r.h2,{id:"no-secret-values",children:"No secret values"}),"\n",(0,i.jsxs)(r.p,{children:["Walrus Sites are fully publicly accessible, as the metadata is stored on Sui, and the site content is stored on Walrus. Therefore, developers ",(0,i.jsx)(r.strong,{children:"must not"})," store secret values within the sites."]}),"\n",(0,i.jsx)(r.p,{children:"Any such backend-specific operations, like storing secret values, authentication, and so on, are achievable by leveraging the integration with the Sui blockchain and a Sui-compatible wallet."}),"\n",(0,i.jsx)(r.h2,{id:"maximum-redirect-depth",children:"Maximum redirect depth"}),"\n",(0,i.jsxs)(r.p,{children:["The number of consecutive redirects a Walrus Site can perform is capped by the ",(0,i.jsx)(r.a,{href:"/docs/sites/portals/deploy-locally",children:"portal"}),". This measure ensures that loading a Walrus Site does not result in an infinite loading loop."]}),"\n",(0,i.jsxs)(r.p,{children:["Different portals can set this limit as they desire. The limit for the portal hosted at ",(0,i.jsx)(r.a,{href:"https://wal.app",children:"https://wal.app"})," has a maximum redirect depth of 3."]}),"\n",(0,i.jsxs)(r.h2,{id:"special-__wal__-path",children:["Special ",(0,i.jsx)(r.code,{children:"__wal__"})," path"]}),"\n",(0,i.jsxs)(r.p,{children:["Anything under the ",(0,i.jsx)(r.code,{children:"/__wal__/*"})," path is reserved by the portal for health checks and other portal-specific operations. If you use this path inside your site, the resources served under that path are not loaded correctly."]}),"\n",(0,i.jsx)(r.h2,{id:"service-worker-portal-limitations",children:"Service-worker portal limitations"}),"\n",(0,i.jsx)(r.p,{children:"The following limitations only apply to portals based on service-workers. If you need to support any of the features listed below, you should use a server-side portal."}),"\n",(0,i.jsx)(r.h3,{id:"service-worker-portals-cannot-serve-sites-based-on-service-workers",children:"Service-worker portals cannot serve sites based on service-workers"}),"\n",(0,i.jsx)(r.p,{children:"Service-worker portals leverage service-workers in the clients' browsers to perform essential operations:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Reading the site metadata from Sui"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Fetching the page content from Walrus"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Serving the content to the browser"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:['Therefore, a site accessed by a service-worker portal cannot use service-workers itself. That is, you can\'t "stack" service-workers. Installing a service-worker from within a Walrus Site results in a dysfunctional site and a poor experience for the ',(0,i.jsx)(s,{lookup:"User",children:"user"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"ios-sui-mobile-wallets-do-not-work-with-the-service-worker-portal",children:"iOS Sui mobile wallets do not work with the service-worker portal"}),"\n",(0,i.jsx)(r.p,{children:"Service workers cannot be loaded inside an in-app browser on iOS because of a limitation of the WebKit engine. As a consequence, Walrus Sites that are accessed through a service-worker portal cannot be used within Sui-compatible wallet apps on iOS. Therefore, Sui wallets cannot currently be used on a service-worker portal on iOS. However, browsing a Walrus Site is still possible on iOS through any browser."}),"\n",(0,i.jsxs)(r.p,{children:["Given that you decided to use a service-worker portal as your main point of access to your sites, to provide a seamless experience for iOS users and other users on browsers that do not support service-workers, it is recommended to redirect to a server-side portal (",(0,i.jsx)(r.a,{href:"https://wal.app",children:"https://wal.app"}),"). Whenever a ","user"," on an iOS wallet browses a Walrus Site, the redirect automatically takes them to the ",(0,i.jsx)(r.code,{children:"<site_name>.wal.app"})," server-side portal. This way, the ","user"," can still use the wallet."]}),"\n",(0,i.jsx)(r.h3,{id:"service-worker-portals-do-not-support-progressive-web-apps-pwas",children:"Service worker portals do not support progressive web apps (PWAs)"}),"\n",(0,i.jsx)(r.p,{children:"With the current design, service-worker portals cannot be used to access progressive web apps (PWAs). Two characteristics of the service-worker portal prevent support for PWAs:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Since the service-worker needs to be registered for the page to work, the PWA's manifest file cannot be loaded by the browser directly."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"There can only be 1 service-worker registered per origin. Therefore, registering a PWA's service-worker would remove the Walrus Sites service-worker, breaking Walrus Sites' functionality."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["The server-side portal does not share these limitations. However, for the moment, both technologies are supported. Walrus Sites must be able to load from both a service-worker portal and a server-side portal, and therefore have to be built with the more restrictive feature set. For more details, see the ",(0,i.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Progressive_web_app#Installation_criteria",children:"installation requirements for PWAs"}),"."]})]})}function p(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);