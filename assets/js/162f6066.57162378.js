"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[1220],{206(e,s,r){r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});let t=JSON.parse('{"id":"design/architecture","title":"Basic Architecture and Security Assumptions","description":"Overview of Walrus system architecture including users, storage nodes, aggregators, and security assumptions for Byzantine fault tolerance.","source":"@site/../content/design/architecture.mdx","sourceDirName":"design","slug":"/design/architecture","permalink":"/docs/design/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/design/architecture.mdx","tags":[],"version":"current","frontMatter":{"title":"Basic Architecture and Security Assumptions","description":"Overview of Walrus system architecture including users, storage nodes, aggregators, and security assumptions for Byzantine fault tolerance.","keywords":["walrus","architecture","storage nodes","shards","byzantine fault tolerance","aggregators","publishers","clients","security assumptions"]}}');var n=r(2615),o=r(5756);let i={title:"Basic Architecture and Security Assumptions",description:"Overview of Walrus system architecture including users, storage nodes, aggregators, and security assumptions for Byzantine fault tolerance.",keywords:["walrus","architecture","storage nodes","shards","byzantine fault tolerance","aggregators","publishers","clients","security assumptions"]},a,l={},c=[{value:"Users",id:"users",level:2},{value:"Storage nodes",id:"storage-nodes",level:2},{value:"Blockchain coordination",id:"blockchain-coordination",level:2},{value:"Byzantine fault tolerance",id:"byzantine-fault-tolerance",level:3},{value:"Optional infrastructure",id:"optional-infrastructure",level:2},{value:"Aggregators",id:"aggregators",level:3},{value:"Caches",id:"caches",level:3},{value:"Publishers",id:"publishers",level:3}];function d(e){let s={a:"a",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:r}=s;return r||function(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"The Walrus architecture is built on the following key actors:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Users:"})," Clients that store and retrieve data ",(0,n.jsx)(r,{lookup:"Blob",children:"blobs"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsxs)(s.strong,{children:[(0,n.jsx)(r,{lookup:"Storage node",children:"Storage nodes"}),":"]})," Distributed ","storage nodes"," that hold erasure-coded data."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Blockchain coordination:"})," ",(0,n.jsx)(s.a,{href:"https://docs.sui.io/",children:"Sui blockchain"})," that manages payments, metadata, and system orchestration."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"users",children:"Users"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Users"})," ",(0,n.jsx)(s.a,{href:"/docs/walrus-client/storing-blobs",children:"interact with Walrus"})," through ",(0,n.jsx)(s.strong,{children:"clients"})," to store and read ",(0,n.jsx)(s.strong,{children:"blobs"}),", which are identified by their ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(r,{lookup:"Blob ID",children:"blob ID"})}),". Users engage with the system in two primary ways:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Storage:"})," Users store new ","blobs"," and pay ",(0,n.jsx)(s.a,{href:"/docs/system-overview/storage-costs",children:"required costs"})," for ",(0,n.jsx)(s.a,{href:"/docs/system-overview/operations#store",children:"write"})," and ",(0,n.jsx)(s.a,{href:"/docs/system-overview/operations#read",children:"non-best-effort read"})," operations."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Availability:"})," Users can ",(0,n.jsx)(s.a,{href:"/docs/system-overview/operations#certify-availability",children:"prove a blob's availability to third parties"})," without the cost of transmitting the full ","blob","."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Users might also exhibit malicious behavior, including:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Refusing to pay for services"}),"\n",(0,n.jsxs)(s.li,{children:["Attempting to prove availability of unavailable ","blobs"]}),"\n",(0,n.jsxs)(s.li,{children:["Modifying or deleting ","blobs"," without authorization"]}),"\n",(0,n.jsxs)(s.li,{children:["Exhausting ","storage node"," resources"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"storage-nodes",children:"Storage nodes"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Storage nodes"})," manage the actual data storage on Walrus. Each ","storage node"," holds one or more ",(0,n.jsx)(s.strong,{children:"shards"})," during a ",(0,n.jsx)(s.a,{href:"/blog/04_testnet_update",children:"storage epoch"}),". Each ","blob"," undergoes ",(0,n.jsx)(s.a,{href:"/docs/design/encoding",children:"erasure encoding"}),", which splits it into many ",(0,n.jsx)(s.strong,{children:"slivers"}),". These slivers from each stored ","blob"," become distributed across all shards in the system. At any given ",(0,n.jsx)(r,{lookup:"Storage epoch",children:"storage epoch"}),", a ","storage node"," associates with one or more shards. The node stores all slivers belonging to its assigned shards and serves them upon request."]}),"\n",(0,n.jsx)(s.h2,{id:"blockchain-coordination",children:"Blockchain coordination"}),"\n",(0,n.jsxs)(s.p,{children:["All clients and ","storage nodes"," run a Sui blockchain ",(0,n.jsx)(r,{lookup:"Client",children:"client"}),", which provides the coordination layer for the entire system. The Sui network manages several operations, including:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Payments:"})," Processing storage fees and service payments."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Resource management:"})," Allocating and tracking storage capacity."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsxs)(s.strong,{children:[(0,n.jsx)(r,{lookup:"Shard",children:"Shard"})," assignment:"]})," Mapping shards to ","storage nodes","."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Metadata management:"})," Storing ","blob"," certificates and system state."]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Users interact with the Sui network to acquire storage resources and submit certificates for stored ","blobs",". ","Storage nodes"," monitor blockchain events to coordinate their operations and respond to system changes."]}),"\n",(0,n.jsx)(s.h3,{id:"byzantine-fault-tolerance",children:"Byzantine fault tolerance"}),"\n",(0,n.jsxs)(s.p,{children:["A ",(0,n.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/sui-101/move-package-management?q=move+package",children:"Sui smart contract"})," controls how shards are assigned to ","storage nodes",". These assignments occur within ",(0,n.jsx)(s.strong,{children:"storage epochs"}),", which last 2 weeks on Mainnet."]}),"\n",(0,n.jsxs)(s.p,{children:["Walrus assumes that more than 2/3 of shards are managed by correct ","storage nodes"," within each ","storage epoch",". The system tolerates up to 1/3 of shards being controlled by Byzantine (malicious or faulty) ","storage nodes",". This tolerance level applies both within individual storage epochs and across transitions between epochs."]}),"\n",(0,n.jsx)(s.h2,{id:"optional-infrastructure",children:"Optional infrastructure"}),"\n",(0,n.jsx)(s.p,{children:"Walrus supports any additional number of optional infrastructure actors that can operate in a permissionless way."}),"\n",(0,n.jsx)(s.h3,{id:"aggregators",children:"Aggregators"}),"\n",(0,n.jsxs)(s.p,{children:["Aggregators are clients that reconstruct complete ","blobs"," from individual slivers and serve them to users over traditional Web2 technologies like HTTP. They are optional because end users can reconstruct ","blobs"," directly from ","storage nodes"," or run a local ",(0,n.jsx)(r,{lookup:"Aggregator",children:"aggregator"})," to perform reads over Web2 protocols."]}),"\n",(0,n.jsx)(s.h3,{id:"caches",children:"Caches"}),"\n",(0,n.jsxs)(s.p,{children:["Caches are aggregators with additional caching functionality to decrease latency and reduce load on ","storage nodes",". ",(0,n.jsx)(r,{lookup:"Cache",children:"Cache"})," infrastructures can also act as CDNs, split the cost of ",(0,n.jsx)(r,{lookup:"Reconstruction",children:"blob reconstruction"})," over many requests, and provide better network connectivity. A ","client"," can always verify that reads from ","cache"," infrastructures are correct."]}),"\n",(0,n.jsx)(s.h3,{id:"publishers",children:"Publishers"}),"\n",(0,n.jsxs)(s.p,{children:["Publishers are clients that help end users store ","blobs"," through Web2 technologies while using less bandwidth and offering custom logic. Publishers streamline the storage process by:"]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Receiving the ","blob"," over traditional Web2 protocols (like HTTP)"]}),"\n",(0,n.jsxs)(s.li,{children:["Encoding the ","blob"," into slivers"]}),"\n",(0,n.jsxs)(s.li,{children:["Distributing slivers to ","storage nodes"]}),"\n",(0,n.jsxs)(s.li,{children:["Collecting ","storage node"," signatures"]}),"\n",(0,n.jsx)(s.li,{children:"Aggregating signatures into a certificate"}),"\n",(0,n.jsx)(s.li,{children:"Performing all required on-chain actions"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Publishers are optional because users can directly interact with Sui and ","storage nodes"," to store ","blobs",". An ",(0,n.jsx)(r,{lookup:"User",children:"end user"})," can always verify that a ",(0,n.jsx)(r,{lookup:"Publisher",children:"publisher"})," performed their duties correctly by checking that an event associated with the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"/docs/design/properties",children:"point of availability"})})," for the ","blob"," exists on-chain, and then either performing a read to see if Walrus returns the ","blob",", or encoding the ","blob"," and comparing the result to the ","blob ID"," in the certificate."]}),"\n",(0,n.jsx)(s.p,{children:"Aggregators, publishers, and end users are not considered trusted system components, and they might arbitrarily deviate from protocol. However, some of the security properties of Walrus only hold for honest end users that use honest intermediaries (caches and publishers). Walrus provides a means for end users to audit the correct operation of both caches and publishers."})]})}function h(e={}){let{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},5756(e,s,r){r.d(s,{R:()=>i,x:()=>a});var t=r(9471);let n={},o=t.createContext(n);function i(e){let s=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);