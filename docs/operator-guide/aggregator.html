<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-operator-guide/aggregator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Operating an Aggregator or Publisher | Walrus Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.wal.app/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.wal.app/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.wal.app/docs/operator-guide/aggregator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Operating an Aggregator or Publisher | Walrus Docs"><meta data-rh="true" name="description" content="Detailed guide for operating Walrus aggregators and publishers including daemon configuration, metrics, and advanced features."><meta data-rh="true" property="og:description" content="Detailed guide for operating Walrus aggregators and publishers including daemon configuration, metrics, and advanced features."><meta data-rh="true" name="keywords" content="walrus,aggregator,publisher,daemon,http api,systemd,metrics,large files,operations"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.wal.app/docs/operator-guide/aggregator"><link data-rh="true" rel="alternate" href="https://docs.wal.app/docs/operator-guide/aggregator" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.wal.app/docs/operator-guide/aggregator" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Operator Guide","item":"https://docs.wal.app/docs/operator-guide/"},{"@type":"ListItem","position":2,"name":"Operating an Aggregator or Publisher","item":"https://docs.wal.app/docs/operator-guide/aggregator"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Walrus Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Walrus Docs Atom Feed">




<script>window.__COPY_PAGE_BUTTON_OPTIONS__={customStyles:{},enabledActions:["copy","view","chatgpt","claude"],id:"default"}</script>






<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="206d9923-4daf-4f2e-aeac-e7683daf5088" data-project-name="Walrus Knowledge" data-project-color="#37c3b0ff" data-button-hide="true" data-modal-title="Ask Walrus AI" data-modal-ask-ai-input-placeholder="Ask me anything about Walrus!" data-modal-example-questions="How do I store data on Walrus?,What is a blob?,What are Walrus Sites?,How much does storage cost?" data-modal-body-bg-color="#E0E2E6" data-source-link-bg-color="#FFFFFF" data-source-link-border="#37c3b0ff" data-answer-feedback-button-bg-color="#FFFFFF" data-answer-copy-button-bg-color="#FFFFFF" data-thread-clear-button-bg-color="#FFFFFF" data-modal-image="/img/logo.svg" async></script><link rel="stylesheet" href="/assets/css/styles.e33f3a8e.css">
<script src="/assets/js/runtime~main.33a37e07.js" defer="defer"></script>
<script src="/assets/js/main.13df632b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<script>window.__PLAUSIBLE_OPTS__={domain:"docs.wal.app",enableInDev:!1,trackOutboundLinks:!0,hashMode:!1,trackLocalhost:!1,id:"default"}</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_CeZ6" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Walrus" class="themedComponent_A7eq themedComponent--light_hrsq"><img src="/img/logo.svg" alt="Walrus" class="themedComponent_A7eq themedComponent--dark_wVAn"></div><b class="navbar__title text--truncate font-light text-xl">Walrus Docs</b></a><div class="flex flex-[8_1_0%] items-center justify-start gap-8 min-[1100px]:gap-8"></div></div><div class="navbar__items navbar__items--right"><div class="flex items-center gap-3"><div class="flex flex-[8_1_0%] items-center justify-start gap-8 min-[1100px]:gap-8"><a class="navbar__item navbar__link" href="/docs/getting-started">Data Storage</a><a class="navbar__item navbar__link" href="/docs/sites/introduction/components">Walrus Sites</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/operator-guide">Service Providers</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/MystenLabs/walrus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a></div><div class="theme-toggle-wrapper text-white max-[996px]:hidden"><div class="toggle_UVfo"><button class="clean-btn toggleButton_ZKVd toggleButtonDisabled_cgWZ" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_HanU lightToggleIcon_xKsG"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_HanU darkToggleIcon_hXM7"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_HanU systemToggleIcon_zSpL"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div><button type="button" class="kapa-trigger-btn flex items-center gap-2.5 cursor-pointer bg-white text-gray-900 font-semibold text-base px-5 py-2.5 rounded-full border border-gray-200 hover:bg-gray-50 transition-colors mx-2"><img src="/img/logo.svg" alt="" width="23" height="23">Ask Walrus AI</button><div class="navbarSearchContainer_rh3W"><button type="button" class="DocSearch DocSearch-Button flex items-center cursor-pointer"><span class="DocSearch-Button-Container flex"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder font-semibold">Search</span></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_IUiK"><div class="docsWrapper_tmH6"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_jImZ" type="button"></button><div class="docRoot_NmEI"><aside class="theme-doc-sidebar-container docSidebarContainer_Us5R"><div class="sidebarViewport_kBEd"><div class="sidebar_y8fz"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_yFB7"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_rmWA menu__link menu__link--sublist menu__link--active" href="/docs/operator-guide"><span title="Operator Guide" class="categoryLinkLabel_GmRm">Operator Guide</span></a><button aria-label="Collapse sidebar category &#x27;Operator Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_rmWA menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/docs/operator-guide/aggregator"><span title="Operating an Aggregator or Publisher" class="categoryLinkLabel_GmRm">Operating an Aggregator or Publisher</span></a><button aria-label="Collapse sidebar category &#x27;Operating an Aggregator or Publisher&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operator-guide/auth-publisher"><span title="The Authenticated Publisher" class="linkLabel_qGdl">The Authenticated Publisher</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_rmWA menu__link menu__link--sublist" tabindex="0" href="/docs/operator-guide/storage-node"><span title="Operating a Storage Node" class="categoryLinkLabel_GmRm">Operating a Storage Node</span></a><button aria-label="Expand sidebar category &#x27;Operating a Storage Node&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operator-guide/upload-relay"><span title="The Walrus Upload Relay" class="linkLabel_qGdl">The Walrus Upload Relay</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_tw9L"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_FpTX"><div class="docItemContainer_xkhF"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_lI8d" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_HcD6"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/operator-guide"><span>Operator Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Operating an Aggregator or Publisher</span></li></ul></nav><div class="tocCollapsible_oYUn theme-doc-toc-mobile tocMobile_cpnN"><button type="button" class="clean-btn tocCollapsibleButton_z6cm">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Operating an Aggregator or Publisher</h1></header>
<p>Run a Walrus <!-- -->aggregator<!-- --> or <!-- -->publisher<!-- --> to expose the <a class="" href="/docs/http-api/storing-blobs">HTTP API</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_kP7e" id="local-daemon">Start a local daemon<a href="#local-daemon" class="hash-link" aria-label="Direct link to Start a local daemon" title="Direct link to Start a local daemon" translate="no">​</a></h2>
<p>Run a local Walrus daemon through the <code>walrus</code> binary using one of three commands:</p>
<ul>
<li class=""><code>walrus aggregator</code>: Starts an <!-- -->aggregator<!-- --> that offers an HTTP interface to read <!-- -->blobs<!-- --> from Walrus.</li>
<li class=""><code>walrus publisher</code>: Starts a <!-- -->publisher<!-- --> that offers an HTTP interface to store <!-- -->blobs<!-- --> in Walrus.</li>
<li class=""><code>walrus daemon</code>: Offers the combined functionality of an <!-- -->aggregator<!-- --> and <!-- -->publisher<!-- --> on the same address and port.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_kP7e" id="run-an-aggregator">Run an <!-- -->aggregator<a href="#run-an-aggregator" class="hash-link" aria-label="Direct link to run-an-aggregator" title="Direct link to run-an-aggregator" translate="no">​</a></h2>
<p>The <!-- -->aggregator<!-- --> does not perform any on-chain actions, and only requires specifying the address on which it listens:</p>
<div class="language-sh codeBlockContainer_gyLn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g1Oz"><pre tabindex="0" class="prism-code language-sh !pt-[14px] codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187"><span class="token-line" style="color:#393A34"><span class="token select-none opacity-40 text-lg">$ </span><span class="token plain">walrus aggregator --bind-address &quot;127.0.0.1:31415&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="sample-systemd-configuration">Sample <code>systemd</code> configuration<a href="#sample-systemd-configuration" class="hash-link" aria-label="Direct link to sample-systemd-configuration" title="Direct link to sample-systemd-configuration" translate="no">​</a></h3>
<p>The following example shows an <!-- -->aggregator<!-- --> node that hosts an HTTP endpoint you can use to fetch data from Walrus over the web.</p>
<p>Run the <!-- -->aggregator<!-- --> process through the <code>walrus</code>client<!-- --> binary using a <code>systemd</code> service:</p>
<div class="language-ini codeBlockContainer_gyLn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g1Oz"><pre tabindex="0" class="prism-code language-ini !pt-[14px] codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Walrus Aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=walrus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=RUST_BACKTRACE=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=RUST_LOG=info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/walrus/bin/walrus --config /opt/walrus/config/client_config.yaml aggregator --bind-address 0.0.0.0:9000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LimitNOFILE=65536</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="support-large-files">Support large files<a href="#support-large-files" class="hash-link" aria-label="Direct link to Support large files" title="Direct link to Support large files" translate="no">​</a></h3>
<p>As of Walrus <code>v1.38.0</code> the <!-- -->aggregator<!-- --> can perform concatenation of multiple <!-- -->blobs<!-- --> through the <code>/v1alpha/blobs/concat</code> endpoint. This endpoint enables delivery of very large files, which would otherwise be unsupported due to individual <!-- -->blob<!-- --> size restrictions. The <code>walrus-store-sliced.sh</code> script that follows shows an example of how a very large file can be sliced and uploaded to Walrus. Once the slices are uploaded, the very large file can be read directly by your downstream users by <code>GET</code> URL construction (listing the <!-- -->blob<!-- --> slices in the query params), or through a <code>POST</code> request with a JSON body listing the ids. Details of this api are available in the online <!-- -->aggregator<!-- --> docs. These can be found at <code>&lt;your-aggregator-url&gt;/v1/api</code>. This endpoint is still under development and its specifications or behavior might change prior to becoming stable.</p>
<details class="details_iWBW alert alert--info details_MnX7" data-collapsed="true"><summary><p>walrus-store-sliced.sh</p></summary><div><div class="collapsibleContent_zQe6"><div class="language-sh codeBlockContainer_gyLn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g1Oz"><pre tabindex="0" class="prism-code language-sh !pt-[14px] codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copyright (c) Walrus Foundation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># SPDX-License-Identifier: Apache-2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -euo pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;$0: error: $1&quot; &gt;&amp;2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;$0: note: $1&quot; &gt;&amp;2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">die() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;$0: error: $1&quot; &gt;&amp;2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Usage: $0 -f &lt;file&gt; -s &lt;size&gt; [-- &lt;walrus store args&gt;...]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Split a file into chunks and store them using walrus store.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;OPTIONS:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  -f &lt;file&gt;             Input file to split (required)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  -s &lt;size&gt;             Chunk size (e.g., 10M, 100K, 1G) (required)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  -h                    Print this usage message&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  --                    Delimiter for walrus store arguments&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;EXAMPLES:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  $0 -f large_file.txt -s 10M -- --epochs 5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;  $0 -f video.mp4 -s 100M -- --epochs max --force&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;The chunks will be named: basename_0.ext, basename_1.ext, etc.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Chunks are automatically deleted when the script exits.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chunk_size=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">walrus_args=()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Parse arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while [[ $# -gt 0 ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case &quot;$1&quot; in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file=&quot;$2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    chunk_size=&quot;$2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -h)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    walrus_args=(&quot;$@&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    break</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error &quot;Unknown option: $1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Validate required arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z &quot;$file&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error &quot;input file (-f) is required&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z &quot;$chunk_size&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error &quot;chunk size (-s) is required&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ ! -f &quot;$file&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  die &quot;file not found: $file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Extract basename and extension</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file_basename=$(basename &quot;$file&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file_name=&quot;${file_basename%.*}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file_ext=&quot;${file_basename##*.}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Handle case where file has no extension</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ &quot;$file_name&quot; == &quot;$file_ext&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  file_ext=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  file_ext=&quot;.$file_ext&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create temp directory for chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp_dir=$(mktemp -d -t walrus-chunks-XXXXXX)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trap &#x27;rm -rf &quot;&#x27;&quot;$temp_dir&quot; EXIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note &quot;splitting $file into chunks of size $chunk_size in $temp_dir...&quot; &gt;&amp;2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Split the file into chunks with numeric suffixes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">split -b &quot;$chunk_size&quot; &quot;$file&quot; &quot;$temp_dir/chunk_&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rename chunks to the desired format: basename_i.ext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chunk_files=()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for chunk in &quot;$temp_dir&quot;/chunk_*; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [[ &quot;$file_ext&quot; == &quot;&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new_name=&quot;$temp_dir/${file_name}_${i}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new_name=&quot;$temp_dir/${file_name}_${i}${file_ext}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mv &quot;$chunk&quot; &quot;$new_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  chunk_files+=(&quot;$new_name&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ((i++))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note &quot;created ${#chunk_files[@]} chunks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Display the chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for chunk in &quot;${chunk_files[@]}&quot;; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  note &quot;  - $(basename &quot;$chunk&quot;)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Call walrus store for each chunk individually</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note &quot;storing ${#chunk_files[@]} chunks...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for chunk_file in &quot;${chunk_files[@]}&quot;; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  note &quot;running: walrus store ${walrus_args[*]} $chunk_file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ! walrus store &quot;${walrus_args[@]}&quot; &quot;$chunk_file&quot;; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit_code=$?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error &quot;✗ walrus store failed with exit code: $exit_code&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    note &quot;failed to store entire file. please address issue above and try again.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit $exit_code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note &quot;✓ all chunks stored successfully&quot;</span><br></span></code></pre></div></div></div></div></details>
<p>For more information about maximum <!-- -->blob<!-- --> sizes, run <code>walrus info</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_kP7e" id="run-a-publisher">Run a <!-- -->publisher<a href="#run-a-publisher" class="hash-link" aria-label="Direct link to run-a-publisher" title="Direct link to run-a-publisher" translate="no">​</a></h2>
<p>The <!-- -->publisher<!-- --> and daemon perform on-chain actions and thus require a Sui Testnet wallet with sufficient SUI and <!-- -->WAL<!-- --> balances. To enable handling many parallel requests without object conflicts, they create internal sub-wallets since version 1.4.0, which are funded from the main wallet. These sub-wallets are persisted in a directory specified with the <code>--sub-wallets-dir</code> argument. Any existing directory can be used. If it already contains sub-wallets, they are reused.</p>
<p>By default, 8 sub-wallets are created and funded. You can change this with the <code>--n-clients</code> argument. For simple local testing, 1 or 2 sub-wallets are usually sufficient.</p>
<p>Run a <!-- -->publisher<!-- --> with a single sub-wallet stored in the Walrus configuration directory:</p>
<div class="language-sh codeBlockContainer_gyLn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g1Oz"><pre tabindex="0" class="prism-code language-sh !pt-[14px] codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187"><span class="token-line" style="color:#393A34"><span class="token plain">PUBLISHER_WALLETS_DIR=~/.config/walrus/publisher-wallets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p &quot;$PUBLISHER_WALLETS_DIR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">walrus publisher \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --bind-address &quot;127.0.0.1:31416&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sub-wallets-dir &quot;$PUBLISHER_WALLETS_DIR&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --n-clients 1</span><br></span></code></pre></div></div>
<p>Replace <code>publisher</code> by <code>daemon</code> to run both an <!-- -->aggregator<!-- --> and <!-- -->publisher<!-- --> on the same address and port.</p>
<div class="theme-admonition theme-admonition-warning admonition_HW0P alert alert--warning"><div class="admonitionHeading_UjXT"><span class="admonitionIcon_o5F7"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_o_Rk"><p>While the <!-- -->aggregator<!-- --> does not perform Sui on-chain actions, and therefore consumes no gas, the <!-- -->publisher<!-- --> does perform actions on-chain and consumes both SUI and <!-- -->WAL<!-- --> tokens. Ensure only authorized parties can access it, or use other measures to manage gas costs, especially in a future Mainnet deployment.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="set-sub-wallets-and-upload-concurrency">Set sub-wallets and upload concurrency<a href="#set-sub-wallets-and-upload-concurrency" class="hash-link" aria-label="Direct link to Set sub-wallets and upload concurrency" title="Direct link to Set sub-wallets and upload concurrency" translate="no">​</a></h3>
<p>The <!-- -->publisher<!-- --> uses sub-wallets to allow storing <!-- -->blobs<!-- --> in parallel. By default, the <!-- -->publisher<!-- --> uses 8 sub-wallets, meaning it can handle 8 <!-- -->blob<!-- --> store HTTP requests concurrently.</p>
<p>To operate a high-performance and concurrency <!-- -->publisher<!-- -->, use the following options:</p>
<ul>
<li class="">The <code>--n-clients &lt;NUM&gt;</code> option creates a number of separate wallets used to perform concurrent Sui chain operations. Increase this to allow more parallel uploads. A higher number requires more SUI and <!-- -->WAL<!-- --> coins initially to be distributed to more wallets.</li>
<li class="">The <code>--max-concurrent-requests &lt;NUM&gt;</code> determines how many concurrent requests can be handled, including Sui operations (limited by number of clients) but also uploads. After this is exceeded, more requests are queued up to the <code>--max-buffer-size &lt;NUM&gt;</code>, after which requests are rejected with an HTTP 429 code.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="manage-sui-coins-in-sub-wallets">Manage SUI coins in sub-wallets<a href="#manage-sui-coins-in-sub-wallets" class="hash-link" aria-label="Direct link to Manage SUI coins in sub-wallets" title="Direct link to Manage SUI coins in sub-wallets" translate="no">​</a></h3>
<p>Each of the sub-wallets requires funds to interact with the chain and purchase storage. A background process checks periodically if the sub-wallets have enough funds. In steady state, each of the sub-wallets has a balance of 0.5-1.0 SUI and <!-- -->WAL<!-- -->. Configure the amount and triggers for coin refills through CLI arguments.</p>
<p>To tweak how refills are handled, use the <code>--refill-interval &lt;REFILL_INTERVAL&gt;</code>, <code>--gas-refill-amount &lt;GAS_REFILL_AMOUNT&gt;</code>, <code>--wal-refill-amount &lt;WAL_REFILL_AMOUNT&gt;</code>, and <code>--sub-wallets-min-balance &lt;SUB_WALLETS_MIN_BALANCE&gt;</code> arguments.</p>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="understand-blob-object-lifecycle">Understand <!-- -->Blob<!-- --> object lifecycle<a href="#understand-blob-object-lifecycle" class="hash-link" aria-label="Direct link to understand-blob-object-lifecycle" title="Direct link to understand-blob-object-lifecycle" translate="no">​</a></h3>
<p>Each store operation in Walrus creates a <code>Blob</code> object on Sui. This <!-- -->blob<!-- --> object represents the (partial) ownership over the associated data, and allows certain data management operations (for example, in the case of deletable <!-- -->blobs<!-- -->).</p>
<p>When the <!-- -->publisher<!-- --> stores a <!-- -->blob<!-- --> on behalf of a <!-- -->client<!-- -->, the <code>Blob</code> object is initially owned by the sub-wallet that stored the <!-- -->blob<!-- -->. Then, the following cases are possible, depending on the configuration:</p>
<ul>
<li class="">If the <!-- -->client<!-- --> requests to store a <!-- -->blob<!-- --> and specifies the <code>send_object_to</code> query parameter (see <a class="" href="/docs/http-api/storing-blobs#store">the relevant section</a> for examples), then the <code>Blob</code> object is transferred to the specified address. This is a way for clients to get back the created object for their data.</li>
<li class="">If the <code>send_object_to</code> query parameter is not specified, two cases are possible:<!-- -->
<ul>
<li class="">By default the sub-wallet transfers the newly-created <!-- -->blob<!-- --> object to the main wallet, such that all these objects are kept there. Change this behavior by setting the <code>--burn-after-store</code> flag, and the <!-- -->blob<!-- --> object is then immediately deleted.</li>
<li class="">However, this flag does not affect the use of the <code>send_object_to</code> query parameter. Regardless of this flag&#x27;s status, the <!-- -->publisher<!-- --> sends created objects to the address in the <code>send_object_to</code> query parameter, if it is specified in the PUT request.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_kP7e" id="use-authenticated-publishers">Use authenticated publishers<a href="#use-authenticated-publishers" class="hash-link" aria-label="Direct link to Use authenticated publishers" title="Direct link to Use authenticated publishers" translate="no">​</a></h3>
<p>The setup and use of an authenticated <!-- -->publisher<!-- --> is covered in a <a class="" href="/docs/operator-guide/auth-publisher">separate section</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_kP7e" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations" translate="no">​</a></h2>
<p>By default, <a class="" href="/docs/http-api/storing-blobs#store">store blob</a> requests are limited to 10 MiB. Increase this limit through the <code>--max-body-size</code> option. <a class="" href="/docs/http-api/storing-blobs#storing-quilts">Store quilt</a> requests are limited to 100 MiB by default, and you can increase them using the <code>--max-quilt-body-size</code> option.</p>
<p>If the <!-- -->aggregator<!-- --> or <!-- -->publisher<!-- --> is hosted on a third-party platform, ensure that any additional platform-imposed limits or constraints are compatible with your intended use case.</p>
<h2 class="anchor anchorTargetStickyNavbar_kP7e" id="view-daemon-metrics">View daemon metrics<a href="#view-daemon-metrics" class="hash-link" aria-label="Direct link to View daemon metrics" title="Direct link to View daemon metrics" translate="no">​</a></h2>
<p>Services by default export a metrics endpoint accessible through <code>curl http://127.0.0.1:27182/metrics</code>. Change it using the <code>--metrics-address &lt;METRICS_ADDRESS&gt;</code> CLI option.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_f0nt"><a href="https://github.com/MystenLabs/walrus/tree/main/docs/../content/operator-guide/aggregator.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_lXe4" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_K8Fr"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/operator-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Operator Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/operator-guide/auth-publisher"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The Authenticated Publisher</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_WCYx thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#local-daemon" class="table-of-contents__link toc-highlight">Start a local daemon</a></li><li><a href="#run-an-aggregator" class="table-of-contents__link toc-highlight">Run an aggregator</a><ul><li><a href="#sample-systemd-configuration" class="table-of-contents__link toc-highlight">Sample <code>systemd</code> configuration</a></li><li><a href="#support-large-files" class="table-of-contents__link toc-highlight">Support large files</a></li></ul></li><li><a href="#run-a-publisher" class="table-of-contents__link toc-highlight">Run a publisher</a><ul><li><a href="#set-sub-wallets-and-upload-concurrency" class="table-of-contents__link toc-highlight">Set sub-wallets and upload concurrency</a></li><li><a href="#manage-sui-coins-in-sub-wallets" class="table-of-contents__link toc-highlight">Manage SUI coins in sub-wallets</a></li><li><a href="#understand-blob-object-lifecycle" class="table-of-contents__link toc-highlight">Understand Blob object lifecycle</a></li><li><a href="#use-authenticated-publishers" class="table-of-contents__link toc-highlight">Use authenticated publishers</a></li></ul></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li><li><a href="#view-daemon-metrics" class="table-of-contents__link toc-highlight">View daemon metrics</a></li><li class="border border-solid border-transparent !mt-4 border-t-suins-gray-20 dark:border-t-suins-white-20"><div class="feedback-widget margin-top--md margin-bottom--md toc-feedback__row"><div class="margin-bottom--sm text-wal-gray-50 dark:text-wal-white-80"><b>Was this page helpful?</b></div><div class="flex"><span class="feedback-widget-positive"><feedback-button project="ilacd94goh" rating="1" custom-font="True" button-style="default" modal-position="center"><button class="button button--outline button--primary button--sm !inline-flex items-center" title="Yes"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg><span class="pl-1">Yes</span></button></feedback-button></span><span class="feedback-widget-negative margin-left--sm"><feedback-button project="ilacd94goh" rating="0" custom-font="True" button-style="default" modal-position="center"><button class="button button--outline button--primary button--sm !inline-flex items-center" title="No"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path></svg><span class="pl-1">No</span></button></feedback-button></span></div></div></li></ul></div></div></div></div></main></div></div></div><footer class="bg-wal-purple-darker py-6 border-t border-wal-green-dark"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center flex-wrap gap-2"><span class="text-wal-white text-sm">Copyright © 2026
                    Walrus Foundation. All rights reserved.</span><div class="text-wal-white-70"><a class="text-wal-white-70 hover:text-wal-white-100" href="/docs/legal/privacy">Privacy</a> <!-- -->•<!-- --> <a class="text-wal-white-70 hover:text-wal-white-100" href="/docs/legal/walrus_general_tos">TOS</a> <!-- -->•<!-- --> <a class="text-wal-white-70 hover:text-wal-white-100" href="/docs/legal/testnet_tos">Tesnet TOS</a></div><div class="flex gap-4"><a href="http://discord.gg/walrusprotocol" target="_blank" rel="noopener noreferrer" class="!text-wal-white-70 hover:!text-wal-white-100 transition-colors duration-200 flex items-center mr-1" aria-label="Join us on Discord"><svg data-prefix="fab" data-icon="discord" class="svg-inline--fa fa-discord fa-lg" role="img" viewBox="0 0 576 512" aria-hidden="true"><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1 .1s-.6 .4-.8 .8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2c-41.3 7.1-81.6 19.6-119.7 37.1-.3 .1-.6 .4-.8 .7-76.2 113.8-97.1 224.9-86.9 334.5 0 .3 .1 .5 .2 .8s.3 .4 .5 .6c44.4 32.9 94 58 146.8 74.2 .4 .1 .8 .1 1.1 0s.7-.4 .9-.7c11.3-15.4 21.4-31.8 30-48.8 .1-.2 .2-.5 .2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6 .2-.9 .3-.5 .6-.7c3.1-2.3 6.2-4.7 9.1-7.1 .3-.2 .6-.4 .9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1 .7-.2 1-.2s.7 .2 .9 .4c2.9 2.4 6 4.9 9.1 7.2 .2 .2 .4 .4 .6 .7s.2 .6 .2 .9-.1 .6-.3 .9-.4 .5-.6 .6c-14.7 8.6-30 15.9-45.9 21.8-.2 .1-.5 .2-.7 .4s-.3 .4-.4 .7-.1 .5-.1 .8 .1 .5 .2 .8c8.8 17 18.8 33.3 30 48.8 .2 .3 .6 .6 .9 .7s.8 .1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2 .2-.2 .4-.4 .5-.6s.2-.5 .2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2zm195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2z"></path></svg></a><a href="https://x.com/walrusprotocol" target="_blank" rel="noopener noreferrer" class="!text-wal-white-70 hover:!text-wal-white-100 transition-colors duration-200 flex items-center mr-1" aria-label="Follow us on Twitter"><svg data-prefix="fab" data-icon="x-twitter" class="svg-inline--fa fa-x-twitter fa-lg" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M357.2 48L427.8 48 273.6 224.2 455 464 313 464 201.7 318.6 74.5 464 3.8 464 168.7 275.5-5.2 48 140.4 48 240.9 180.9 357.2 48zM332.4 421.8l39.1 0-252.4-333.8-42 0 255.3 333.8z"></path></svg></a><a href="https://github.com/MystenLabs/walrus" target="_blank" rel="noopener noreferrer" class="!text-wal-white-70 hover:!text-wal-white-100 transition-colors duration-200 flex items-center" aria-label="View source on GitHub"><svg data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-lg" role="img" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM252.8 8c-138.7 0-244.8 105.3-244.8 244 0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1 100-33.2 167.8-128.1 167.8-239 0-138.7-112.5-244-251.2-244zM105.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div></div></div></footer></div>
</body>
</html>